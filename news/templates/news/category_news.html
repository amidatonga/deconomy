{% extends 'news/base.html' %}
{% block content %}
  <div class="page-header">
    <h1>Category: {{ category.title }}</h1>
    <p>Articles: {{ page_obj.paginator.count }}</p>
  </div>
  {% for post in news %}
    <div class="post">
     <h2><a href="{% url 'news_page' pk=post.pk %}">{{ post.title }}</a></h2>
     <p>{{ post.text|striptags|truncatechars:200 }}</p>
     <p>Author: <a href="{% url 'user_news' post.author %}">{{ post.author }}</a></p>
     <p>Published: <b>{{ post.published_date}}</b></p>
     <br><br>
   </div>
  {% endfor %}

  {% if is_paginated %}
    {% if page_obj.has_previous %}
      <a href="/" class="btn btn-outline-warning">Home</a>
      <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-outline-warning"><</a>
    {% endif %}

    {% for num in page_obj.paginator.page_range %}
      {% if num == page_obj.number %}
        <button class='btn btn-warning'>{{ num }}</button>
      {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
        <a href="?page={{ num }}" class="btn btn-outline-warning">{{ num }}</a>
      {% endif %}


    {% endfor %}

    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}" class="btn btn-outline-warning">></a>
      <a href="?page={{ page_obj.paginator.num_pages }}" class="btn btn-outline-warning">Last page</a>
    {% endif %}
  {% endif %}

{% endblock content %}
